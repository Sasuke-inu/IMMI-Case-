{% extends "base.html" %}
{% block title %}Search Cases{% endblock %}

{% block content %}
<h2 class="mb-4">Search for New Cases</h2>
<p class="text-muted">Search AustLII and Federal Court for immigration, home affairs, and refugee cases. Results are saved and merged with your existing records.</p>

<form method="post">
  <div class="row g-4">
    <div class="col-lg-8">
      <div class="card shadow-sm">
        <div class="card-header"><h6 class="mb-0">AustLII Databases</h6></div>
        <div class="card-body">
          <p class="small text-muted">Select which courts/tribunals to search:</p>
          <div class="row g-2">
            {% for code, info in databases.items() %}
            <div class="col-md-6">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" name="databases" value="{{ code }}" id="db_{{ code }}"
                  {% if code in ('AATA', 'FCA', 'FCCA', 'FedCFamC2G') %}checked{% endif %}>
                <label class="form-check-label" for="db_{{ code }}">
                  <strong>{{ code }}</strong> &mdash; {{ info.name }}
                  <br><small class="text-muted">{{ info.description }}</small>
                </label>
              </div>
            </div>
            {% endfor %}
          </div>

          <hr>

          <div class="form-check">
            <input class="form-check-input" type="checkbox" name="sources" value="fedcourt" id="src_fedcourt" checked>
            <label class="form-check-label" for="src_fedcourt">
              <strong>Federal Court Judgment Search</strong>
              <br><small class="text-muted">search2.fedcourt.gov.au</small>
            </label>
          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-4">
      <div class="card shadow-sm mb-3">
        <div class="card-header"><h6 class="mb-0">Search Parameters</h6></div>
        <div class="card-body">
          <div class="mb-3">
            <label class="form-label">Start Year</label>
            <input type="number" name="start_year" class="form-control" value="{{ start_year }}" min="2000" max="2030">
          </div>
          <div class="mb-3">
            <label class="form-label">End Year</label>
            <input type="number" name="end_year" class="form-control" value="{{ end_year }}" min="2000" max="2030">
          </div>
          <div class="mb-3">
            <label class="form-label">Max Results per Database</label>
            <select name="max_results" class="form-select">
              <option value="100">100</option>
              <option value="250">250</option>
              <option value="500" selected>500</option>
              <option value="1000">1,000</option>
              <option value="5000">5,000 (slow)</option>
            </select>
          </div>
        </div>
      </div>

      <div class="d-grid">
        <button type="submit" class="btn btn-primary btn-lg"><i class="bi bi-search me-2"></i>Start Search</button>
      </div>
      <p class="text-muted small mt-2 text-center">Search runs in the background. You can monitor progress on the Job Status page.</p>
    </div>
  </div>
</form>
{% endblock %}
