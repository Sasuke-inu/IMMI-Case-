import{j as e}from"./query-DQVcjD57.js";import{u as b,r as u}from"./vendor-CxW-pF4z.js";import{g as h}from"./use-cases-DtOm505J.js";import{B as p}from"./Breadcrumb-DgmWk9ZU.js";import{c as f,u as C,t as d}from"./index-Bnk0r1Pl.js";import"./api-mEKAgK73.js";import"./chevron-right-By1PNT4I.js";import"./charts-CKTqRh7i.js";const v=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],j=f("plus",v),N=["","AATA","ARTA","FCA","FCCA","FedCFamC2G","HCA"],y=["","Migration","Refugee","Judicial Review","Citizenship","Visa Cancellation","Deportation","Character","Bridging Visa"];function O(){const{t:n}=C(),c=b(),l=h(),[a,r]=u.useState({}),t=u.useCallback((s,i)=>{r(x=>({...x,[s]:i}))},[]),g=async s=>{if(s.preventDefault(),!a.title?.trim()){d.error(n("pages.case_add.title_required"));return}if(a.citation&&!/^\[?\d{4}\]?\s+\w+\s+\d+/.test(a.citation)){d.error(n("pages.case_add.citation_format"));return}try{const i=await l.mutateAsync(a);d.success(n("pages.case_add.success")),c(`/cases/${i.case_id}`)}catch(i){d.error(i.message)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(p,{items:[{label:"Cases",href:"/cases"},{label:"Add Case"}]}),e.jsx("form",{onSubmit:g,children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"rounded-lg border border-border bg-card p-5 lg:col-span-2",children:[e.jsx("h2",{className:"mb-3 font-heading text-base font-semibold",children:"New Case"}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsx(o,{label:"Title *",value:a.title,onChange:s=>t("title",s)}),e.jsx(o,{label:"Citation",value:a.citation,onChange:s=>t("citation",s),placeholder:"[2024] FCA 123"}),e.jsx(o,{label:"Court",value:a.court,onChange:s=>t("court",s)}),e.jsx(m,{label:"Court Code",value:a.court_code,options:N,onChange:s=>t("court_code",s)}),e.jsx(o,{label:"Date",value:a.date,onChange:s=>t("date",s),placeholder:"DD Month YYYY"}),e.jsx(o,{label:"Judges",value:a.judges,onChange:s=>t("judges",s)}),e.jsx(o,{label:"Outcome",value:a.outcome,onChange:s=>t("outcome",s)}),e.jsx(o,{label:"Visa Type",value:a.visa_type,onChange:s=>t("visa_type",s)}),e.jsx(o,{label:"Visa Subclass",value:a.visa_subclass,onChange:s=>t("visa_subclass",s)}),e.jsx(o,{label:"Visa Class Code",value:a.visa_class_code,onChange:s=>t("visa_class_code",s)}),e.jsx(m,{label:"Case Nature",value:a.case_nature,options:y,onChange:s=>t("case_nature",s)}),e.jsx(o,{label:"URL",value:a.url,onChange:s=>t("url",s),span2:!0}),e.jsx(o,{label:"Source",value:a.source,onChange:s=>t("source",s)}),e.jsx(o,{label:"Legislation",value:a.legislation,onChange:s=>t("legislation",s)})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-lg border border-border bg-card p-5",children:[e.jsx("h2",{className:"mb-3 font-heading text-base font-semibold",children:"Annotations"}),e.jsx(o,{label:"Tags",value:a.tags,onChange:s=>t("tags",s),placeholder:"Comma-separated"}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-secondary-text",children:"Notes"}),e.jsx("textarea",{value:a.user_notes??"",onChange:s=>t("user_notes",s.target.value),rows:6,className:"w-full rounded-md border border-border bg-surface px-3 py-1.5 text-sm text-foreground focus:border-accent focus:outline-none focus:ring-1 focus:ring-accent"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>c(-1),className:"flex-1 rounded-md border border-border px-4 py-2 text-sm text-foreground hover:bg-surface",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:l.isPending,className:"flex flex-1 items-center justify-center gap-1 rounded-md bg-accent px-4 py-2 text-sm font-medium text-white hover:bg-accent-light disabled:opacity-50",children:[e.jsx(j,{className:"h-4 w-4"}),l.isPending?"Creating...":"Create"]})]})]})]})})]})}function o({label:n,value:c,onChange:l,placeholder:a,span2:r}){return e.jsxs("div",{className:r?"sm:col-span-2":"",children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-secondary-text",children:n}),e.jsx("input",{type:"text",value:c??"",onChange:t=>l(t.target.value),placeholder:a,className:"w-full rounded-md border border-border bg-surface px-3 py-1.5 text-sm text-foreground focus:border-accent focus:outline-none focus:ring-1 focus:ring-accent"})]})}function m({label:n,value:c,options:l,onChange:a}){return e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-secondary-text",children:n}),e.jsx("select",{value:c??"",onChange:r=>a(r.target.value),className:"w-full rounded-md border border-border bg-surface px-3 py-1.5 text-sm text-foreground focus:border-accent focus:outline-none focus:ring-1 focus:ring-accent",children:l.map(r=>e.jsx("option",{value:r,children:r||`Select ${n}...`},r))})]})}export{O as CaseAddPage};
