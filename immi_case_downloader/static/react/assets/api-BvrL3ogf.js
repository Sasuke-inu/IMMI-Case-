let u=null;const y=2e4;async function g(){return u||(u=(await(await fetch("/api/v1/csrf-token")).json()).csrf_token,u)}async function o(t,e={}){const n={"Content-Type":"application/json",...e.headers};e.method&&e.method!=="GET"&&(n["X-CSRFToken"]=await g());let a,l=e.signal;if(!l){const i=new AbortController;l=i.signal,a=setTimeout(()=>i.abort(),y)}let r;try{r=await fetch(t,{...e,headers:n,signal:l})}catch(i){throw i instanceof DOMException&&i.name==="AbortError"?new Error(`Request timeout after ${y/1e3} seconds`):i}finally{a&&clearTimeout(a)}if(!r.ok){const i=await r.json().catch(()=>({error:r.statusText}));throw new Error(i.error||`API error: ${r.status}`)}return r.json()}const f=new Date().getFullYear();function h(t,e){e&&(e.caseNatures?.length&&t.set("case_natures",e.caseNatures.join(",")),e.visaSubclasses?.length&&t.set("visa_subclasses",e.visaSubclasses.join(",")),e.outcomeTypes?.length&&t.set("outcome_types",e.outcomeTypes.join(",")))}function c(t){if(!t)return"";const e=new URLSearchParams;t.court&&e.set("court",t.court),t.yearFrom&&t.yearFrom>2e3&&e.set("year_from",String(t.yearFrom)),t.yearTo&&t.yearTo<f&&e.set("year_to",String(t.yearTo)),h(e,t);const n=e.toString();return n?`?${n}`:""}function s(t,e){e&&(e.court&&t.set("court",e.court),e.yearFrom&&e.yearFrom>2e3&&t.set("year_from",String(e.yearFrom)),e.yearTo&&e.yearTo<f&&t.set("year_to",String(e.yearTo)),h(t,e))}function p(t){return o(`/api/v1/stats${c(t)}`)}function S(t){return o(`/api/v1/stats/trends${c(t)}`)}function d(){return o("/api/v1/court-lineage")}function m(t){return o(`/api/v1/analytics/outcomes${c(t)}`)}function v(t,e=20){const n=c(t);return o(`/api/v1/analytics/judges${n}${n?"&":"?"}limit=${e}`)}function $(t,e=20){const n=c(t);return o(`/api/v1/analytics/legal-concepts${n}${n?"&":"?"}limit=${e}`)}function w(t){return o(`/api/v1/analytics/nature-outcome${c(t)}`)}function T(t={}){const e=new URLSearchParams;s(e,t),t.visa_subclass&&e.set("visa_subclass",t.visa_subclass),t.case_nature&&e.set("case_nature",t.case_nature),t.legal_concepts&&t.legal_concepts.length>0&&e.set("legal_concepts",t.legal_concepts.join(","));const n=e.toString()?`?${e.toString()}`:"";return o(`/api/v1/analytics/success-rate${n}`)}function b(t={}){const e=new URLSearchParams;s(e,t),t.sort_by&&e.set("sort_by",t.sort_by),typeof t.limit=="number"&&e.set("limit",String(t.limit));const n=e.toString()?`?${e.toString()}`:"";return o(`/api/v1/analytics/judge-leaderboard${n}`)}function _(t,e={}){const n=new URLSearchParams;return n.set("name",t),e.yearFrom&&e.yearFrom>2e3&&n.set("year_from",String(e.yearFrom)),e.yearTo&&e.yearTo<f&&n.set("year_to",String(e.yearTo)),o(`/api/v1/analytics/judge-profile?${n.toString()}`)}function P(t,e={}){const n=new URLSearchParams;return n.set("names",t.join(",")),e.yearFrom&&e.yearFrom>2e3&&n.set("year_from",String(e.yearFrom)),e.yearTo&&e.yearTo<f&&n.set("year_to",String(e.yearTo)),o(`/api/v1/analytics/judge-compare?${n.toString()}`)}function C(t){return o(`/api/v1/analytics/judge-bio?name=${encodeURIComponent(t)}`)}function L(t={}){const e=new URLSearchParams;s(e,t),typeof t.limit=="number"&&e.set("limit",String(t.limit));const n=e.toString()?`?${e.toString()}`:"";return o(`/api/v1/analytics/concept-effectiveness${n}`)}function R(t={}){const e=new URLSearchParams;s(e,t),typeof t.limit=="number"&&e.set("limit",String(t.limit)),typeof t.min_count=="number"&&e.set("min_count",String(t.min_count));const n=e.toString()?`?${e.toString()}`:"";return o(`/api/v1/analytics/concept-cooccurrence${n}`)}function F(t={}){const e=new URLSearchParams;s(e,t),typeof t.limit=="number"&&e.set("limit",String(t.limit));const n=e.toString()?`?${e.toString()}`:"";return o(`/api/v1/analytics/concept-trends${n}`)}function U(t={}){const e=new URLSearchParams;s(e,t);const n=e.toString()?`?${e.toString()}`:"";return o(`/api/v1/analytics/monthly-trends${n}`)}function x(t={}){const e=new URLSearchParams;s(e,t),typeof t.top_n=="number"&&e.set("top_n",String(t.top_n));const n=e.toString()?`?${e.toString()}`:"";return o(`/api/v1/analytics/flow-matrix${n}`)}function j(t){const e=new URLSearchParams;for(const[n,a]of Object.entries(t))a!==void 0&&a!==""&&e.set(n,String(a));return o(`/api/v1/cases?${e}`)}function O(t){return o(`/api/v1/cases/${t}`)}async function E(t){return(await o("/api/v1/cases",{method:"POST",body:JSON.stringify(t)})).case}async function q(t,e){return(await o(`/api/v1/cases/${t}`,{method:"PUT",body:JSON.stringify(e)})).case}function J(t){return o(`/api/v1/cases/${t}`,{method:"DELETE"})}function k(t,e,n){return o("/api/v1/cases/batch",{method:"POST",body:JSON.stringify({action:t,case_ids:e,tag:n})})}function N(t){const e=new URLSearchParams;return t.forEach(n=>e.append("ids",n)),o(`/api/v1/cases/compare?${e}`)}function A(t){return o(`/api/v1/cases/${t}/related`)}function D(){return o("/api/v1/filter-options")}function I(){return o("/api/v1/job-status")}function M(t){return o("/api/v1/download/start",{method:"POST",body:JSON.stringify(t)})}function B(){return o("/api/v1/pipeline-status")}function G(t,e){return o("/api/v1/pipeline-action",{method:"POST",body:JSON.stringify({action:t,...e})})}function H(){return o("/api/v1/data-dictionary")}function X(t=1,e=10){const n=new URLSearchParams;return n.set("page",String(t)),n.set("limit",String(e)),o(`/api/v1/legislations?${n}`)}function Y(t){return o(`/api/v1/legislations/${encodeURIComponent(t)}`)}function z(t,e=20){const n=new URLSearchParams;return n.set("q",t),n.set("limit",String(e)),o(`/api/v1/legislations/search?${n}`)}function K(t){return o("/api/v1/legislations/update",{method:"POST",body:JSON.stringify(t?{law_id:t}:{})})}function Q(){return o("/api/v1/legislations/update/status")}async function V(t){const e=await g(),n=await fetch("/api/v1/collections/export",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":e},body:JSON.stringify(t),signal:AbortSignal.timeout(3e4)});if(!n.ok){const a=await n.json().catch(()=>({error:n.statusText}));throw new Error(a.error??`Export failed: ${n.status}`)}return n.text()}function W(t){window.location.href=`/api/v1/export/${t}`}export{D as A,b as B,_ as C,P as D,C as E,K as F,X as G,Y as H,z as I,Q as J,d as K,V as L,B as a,p as b,N as c,W as d,S as e,I as f,H as g,m as h,v as i,$ as j,w as k,T as l,L as m,R as n,F as o,G as p,x as q,U as r,M as s,E as t,q as u,J as v,k as w,j as x,O as y,A as z};
