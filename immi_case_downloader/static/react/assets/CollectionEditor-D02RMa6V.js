import{j as t}from"./query-DQVcjD57.js";import{r}from"./vendor-CxW-pF4z.js";import{u as w,X as b,a as C}from"./index-Cnpb2OEX.js";const E=["blue","green","amber","rose","purple","slate"],S={blue:"bg-blue-500",green:"bg-green-500",amber:"bg-amber-500",rose:"bg-rose-500",purple:"bg-purple-500",slate:"bg-slate-500"};function R({open:a,collection:n,onSave:v,onCancel:l}){const{t:s}=w(),f=r.useRef(null),[d,p]=r.useState(""),[g,h]=r.useState(""),[c,i]=r.useState([]),[j,m]=r.useState(""),[u,x]=r.useState(void 0);if(r.useEffect(()=>{a&&(p(n?.name??""),h(n?.description??""),i(n?.tags??[]),x(n?.color),m(""),setTimeout(()=>f.current?.focus(),50))},[a,n]),r.useEffect(()=>{if(!a)return;const e=o=>{o.key==="Escape"&&l()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a,l]),!a)return null;function N(e){if(e.key==="Enter"){e.preventDefault();const o=j.trim();o&&!c.includes(o)&&i([...c,o]),m("")}}function y(e){i(c.filter(o=>o!==e))}function k(){const e=d.trim();e&&v(e,g.trim(),c,u)}return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:l,children:t.jsxs("div",{className:"w-full max-w-md rounded-xl border border-border bg-card p-6 shadow-xl",onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[t.jsx("h2",{className:"font-heading text-base font-semibold text-foreground",children:n?s("common.edit","Edit"):s("bookmarks.new_collection","New Collection")}),t.jsx("button",{onClick:l,className:"rounded-md p-1 text-muted-text hover:bg-surface hover:text-foreground",children:t.jsx(b,{className:"h-4 w-4"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"mb-1 block text-xs font-medium text-secondary-text",children:[s("bookmarks.collection_name","Collection Name")," *"]}),t.jsx("input",{ref:f,value:d,onChange:e=>p(e.target.value),onKeyDown:e=>{e.key==="Enter"&&k()},placeholder:s("bookmarks.collection_name","Collection Name"),className:"w-full rounded-md border border-border bg-surface px-3 py-1.5 text-sm text-foreground placeholder:text-muted-text focus:border-accent focus:outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-xs font-medium text-secondary-text",children:s("bookmarks.collection_description","Description (optional)")}),t.jsx("input",{value:g,onChange:e=>h(e.target.value),placeholder:s("bookmarks.collection_description","Description (optional)"),className:"w-full rounded-md border border-border bg-surface px-3 py-1.5 text-sm text-foreground placeholder:text-muted-text focus:border-accent focus:outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-xs font-medium text-secondary-text",children:s("bookmarks.collection_tags","Tags")}),t.jsxs("div",{className:"flex flex-wrap gap-1.5 rounded-md border border-border bg-surface px-3 py-2",children:[c.map(e=>t.jsxs("span",{className:"flex items-center gap-1 rounded-full bg-accent/10 px-2 py-0.5 text-xs text-accent",children:[e,t.jsx("button",{onClick:()=>y(e),className:"ml-0.5 text-accent/60 hover:text-accent",children:t.jsx(b,{className:"h-2.5 w-2.5"})})]},e)),t.jsx("input",{value:j,onChange:e=>m(e.target.value),onKeyDown:N,placeholder:s("bookmarks.add_tag","Add tag"),className:"min-w-[80px] flex-1 bg-transparent text-sm text-foreground placeholder:text-muted-text focus:outline-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-2 block text-xs font-medium text-secondary-text",children:s("bookmarks.collection_color","Colour")}),t.jsxs("div",{className:"flex gap-2",children:[E.map(e=>t.jsx("button",{onClick:()=>x(e),className:C("h-6 w-6 rounded-full transition-transform",S[e],u===e?"ring-2 ring-accent ring-offset-2 ring-offset-card scale-110":"hover:scale-110"),"aria-label":e},e)),u&&t.jsx("button",{onClick:()=>x(void 0),className:"h-6 w-6 rounded-full border border-border bg-surface text-muted-text hover:scale-110 transition-transform flex items-center justify-center","aria-label":"Clear color",children:t.jsx(b,{className:"h-3 w-3"})})]})]})]}),t.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[t.jsx("button",{onClick:l,className:"rounded-md border border-border px-4 py-1.5 text-sm text-foreground hover:bg-surface",children:s("common.cancel","Cancel")}),t.jsx("button",{onClick:k,disabled:!d.trim(),className:"rounded-md bg-accent px-4 py-1.5 text-sm font-medium text-white hover:bg-accent/90 disabled:opacity-50",children:s("common.save","Save")})]})]})})}export{R as C};
