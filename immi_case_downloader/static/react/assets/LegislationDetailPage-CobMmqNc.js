import{j as e}from"./query-DQVcjD57.js";import{j as h,u as g,r as p}from"./vendor-CxW-pF4z.js";import{d as b}from"./use-legislations-BxD-4iAp.js";import{B as c}from"./Breadcrumb-C4HHSd_J.js";import{c as j,u as N,a as m,B as v}from"./index-i49H2fqV.js";import{E as y}from"./external-link-D0k1X9Rx.js";import"./api-aTUBEVUX.js";import"./chevron-right-DCE_PkgX.js";import"./charts-CKTqRh7i.js";const w=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],x=j("arrow-left",w),L="https://www.austlii.edu.au/au/legis/cth";function r({label:t,value:n,mono:a}){return!n&&n!==0?null:e.jsxs("div",{children:[e.jsx("dt",{className:"text-xs font-medium text-secondary-text",children:t}),e.jsx("dd",{className:m("mt-0.5 text-sm text-foreground",a&&"font-mono text-xs"),children:n})]})}function _({sections:t}){const n=p.useMemo(()=>{const a=new Map;for(const o of t){const l=o.part||"General Provisions";a.has(l)||a.set(l,[]),a.get(l).push(o)}return a},[t]);return e.jsxs("nav",{className:"max-h-[calc(100vh-12rem)] overflow-y-auto rounded-lg border border-border bg-card p-3",children:[e.jsx("p",{className:"mb-2 text-xs font-semibold uppercase tracking-wider text-muted-text",children:"Contents"}),e.jsx("ul",{className:"space-y-3",children:Array.from(n.entries()).map(([a,o])=>e.jsxs("li",{children:[e.jsx("p",{className:"mb-1 text-xs font-semibold leading-tight text-secondary-text",children:a}),e.jsx("ul",{className:"space-y-0.5 border-l border-border pl-2",children:o.map(l=>e.jsx("li",{children:e.jsxs("a",{href:`#${l.id}`,className:m("block truncate rounded px-1.5 py-0.5 text-xs text-muted-text","transition-colors hover:bg-surface hover:text-foreground"),children:[e.jsx("span",{className:"font-mono text-accent",children:l.number}),l.title&&e.jsx("span",{className:"ml-1 text-secondary-text",children:l.title})]})},l.id))})]},a))})]})}function k({section:t}){return e.jsxs("div",{id:t.id,className:"scroll-mt-4 rounded-lg border border-border bg-card p-4",children:[e.jsxs("div",{className:"mb-2 flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"font-mono text-sm font-semibold text-accent",children:t.number}),t.title&&e.jsx("span",{className:"font-heading text-sm font-medium text-foreground",children:t.title})]}),t.division&&e.jsx("span",{className:"shrink-0 rounded bg-surface px-1.5 py-0.5 text-xs text-muted-text",children:t.division})]}),e.jsx("pre",{className:"whitespace-pre-wrap font-mono text-xs leading-relaxed text-secondary-text",children:t.text})]})}function I({onUpdate:t}){return e.jsxs("div",{className:"flex flex-col items-center justify-center rounded-lg border border-dashed border-border bg-card p-12 text-center",children:[e.jsx(v,{className:"mb-3 h-10 w-10 text-muted-text"}),e.jsx("h3",{className:"font-heading text-base font-semibold text-foreground",children:"Full text not yet downloaded"}),e.jsx("p",{className:"mt-1 text-sm text-secondary-text",children:'Click "Update Laws" on the legislations list to download section text from AustLII.'}),e.jsx("button",{onClick:t,className:"mt-4 rounded-md bg-accent px-4 py-2 text-sm font-medium text-accent-foreground hover:bg-accent/90",children:"Go to Legislations"})]})}function M(){const{t}=N(),{id:n}=h(),a=g(),{data:o,isLoading:l,error:u}=b(n??null);if(u)return e.jsxs("div",{className:"space-y-4",children:[e.jsx(c,{items:[{label:t("common.dashboard"),href:"/"},{label:t("legislations.title",{defaultValue:"Legislations"}),href:"/legislations"},{label:t("common.not_found")}]}),e.jsxs("div",{className:"flex h-64 flex-col items-center justify-center rounded-lg border border-danger/30 bg-danger/5 p-8 text-center",children:[e.jsx("h2",{className:"font-heading text-lg font-semibold text-foreground",children:t("common.not_found")}),e.jsx("p",{className:"mt-2 text-sm text-secondary-text",children:t("legislations.not_found_description",{defaultValue:"This legislation could not be found"})}),e.jsxs("button",{onClick:()=>a("/legislations"),className:"mt-4 flex items-center gap-2 rounded-md bg-accent px-3 py-2 text-sm font-medium text-accent-foreground hover:bg-accent/90",children:[e.jsx(x,{className:"h-4 w-4"}),t("common.back")]})]})]});if(l||!o)return e.jsx("div",{className:"flex h-64 items-center justify-center text-muted-text",children:t("common.loading_ellipsis")});const s=o.data,i=s.sections??[],f=`${L}/${s.austlii_id}/`;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{items:[{label:t("common.dashboard"),href:"/"},{label:t("legislations.title",{defaultValue:"Legislations"}),href:"/legislations"},{label:s.title}]}),e.jsxs("button",{onClick:()=>a("/legislations"),className:"flex items-center gap-2 rounded-md border border-border px-3 py-1.5 text-sm text-foreground hover:bg-surface",children:[e.jsx(x,{className:"h-3.5 w-3.5"}),t("common.back")]})]}),e.jsx("div",{className:"rounded-lg border border-border bg-card p-5",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h1",{className:"font-heading text-2xl font-semibold text-foreground",children:s.title}),s.description&&e.jsx("p",{className:"mt-2 text-sm leading-relaxed text-secondary-text",children:s.description})]}),s.shortcode&&e.jsx("div",{className:"shrink-0 rounded-md bg-accent/10 px-3 py-1.5 text-sm font-medium text-accent",children:s.shortcode})]})}),e.jsxs("div",{className:"rounded-lg border border-border bg-card p-5",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("h2",{className:"font-heading text-base font-semibold text-foreground",children:t("legislations.information",{defaultValue:"Legislation Information"})}),e.jsxs("a",{href:f,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-xs text-accent hover:underline",children:[e.jsx(y,{className:"h-3 w-3"}),"AustLII"]})]}),e.jsxs("dl",{className:"grid gap-x-6 gap-y-2.5 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsx(r,{label:"ID",value:s.id,mono:!0}),e.jsx(r,{label:"Shortcode",value:s.shortcode,mono:!0}),e.jsx(r,{label:"AustLII ID",value:s.austlii_id,mono:!0}),e.jsx(r,{label:"Jurisdiction",value:s.jurisdiction}),e.jsx(r,{label:"Type",value:s.type}),e.jsx(r,{label:t("legislations.sections",{defaultValue:"Sections"}),value:s.sections_count||void 0}),e.jsx(r,{label:t("legislations.last_amended",{defaultValue:"Last Amended"}),value:s.last_amended||void 0}),e.jsx(r,{label:t("legislations.last_scraped",{defaultValue:"Last Scraped"}),value:s.last_scraped?new Date(s.last_scraped).toLocaleDateString("en-AU"):void 0})]})]}),i.length===0?e.jsx(I,{onUpdate:()=>a("/legislations")}):e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-[280px_1fr]",children:[e.jsx("div",{className:"lg:sticky lg:top-4 lg:self-start",children:e.jsx(_,{sections:i})}),e.jsx("div",{className:"space-y-3",children:i.map(d=>e.jsx(k,{section:d},d.id))})]})]})}export{M as LegislationDetailPage};
