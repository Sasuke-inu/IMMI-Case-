let u=null;const y=2e4;async function h(){return u||(u=(await(await fetch("/api/v1/csrf-token")).json()).csrf_token,u)}async function o(e,t={}){const n={"Content-Type":"application/json",...t.headers};t.method&&t.method!=="GET"&&(n["X-CSRFToken"]=await h());let a,l=t.signal;if(!l){const i=new AbortController;l=i.signal,a=setTimeout(()=>i.abort(),y)}let r;try{r=await fetch(e,{...t,headers:n,signal:l})}catch(i){throw i instanceof DOMException&&i.name==="AbortError"?new Error(`Request timeout after ${y/1e3} seconds`):i}finally{a&&clearTimeout(a)}if(!r.ok){const i=await r.json().catch(()=>({error:r.statusText}));throw new Error(i.error||`API error: ${r.status}`)}return r.json()}const f=new Date().getFullYear();function g(e,t){t&&(t.caseNatures?.length&&e.set("case_natures",t.caseNatures.join(",")),t.visaSubclasses?.length&&e.set("visa_subclasses",t.visaSubclasses.join(",")),t.outcomeTypes?.length&&e.set("outcome_types",t.outcomeTypes.join(",")))}function c(e){if(!e)return"";const t=new URLSearchParams;e.court&&t.set("court",e.court),e.yearFrom&&e.yearFrom>2e3&&t.set("year_from",String(e.yearFrom)),e.yearTo&&e.yearTo<f&&t.set("year_to",String(e.yearTo)),g(t,e);const n=t.toString();return n?`?${n}`:""}function s(e,t){t&&(t.court&&e.set("court",t.court),t.yearFrom&&t.yearFrom>2e3&&e.set("year_from",String(t.yearFrom)),t.yearTo&&t.yearTo<f&&e.set("year_to",String(t.yearTo)),g(e,t))}function S(e){return o(`/api/v1/stats${c(e)}`)}function d(e){return o(`/api/v1/stats/trends${c(e)}`)}function p(e){return o(`/api/v1/analytics/outcomes${c(e)}`)}function m(e,t=20){const n=c(e);return o(`/api/v1/analytics/judges${n}${n?"&":"?"}limit=${t}`)}function v(e,t=20){const n=c(e);return o(`/api/v1/analytics/legal-concepts${n}${n?"&":"?"}limit=${t}`)}function $(e){return o(`/api/v1/analytics/nature-outcome${c(e)}`)}function w(e={}){const t=new URLSearchParams;s(t,e),e.visa_subclass&&t.set("visa_subclass",e.visa_subclass),e.case_nature&&t.set("case_nature",e.case_nature),e.legal_concepts&&e.legal_concepts.length>0&&t.set("legal_concepts",e.legal_concepts.join(","));const n=t.toString()?`?${t.toString()}`:"";return o(`/api/v1/analytics/success-rate${n}`)}function _(e={}){const t=new URLSearchParams;s(t,e),e.sort_by&&t.set("sort_by",e.sort_by),typeof e.limit=="number"&&t.set("limit",String(e.limit));const n=t.toString()?`?${t.toString()}`:"";return o(`/api/v1/analytics/judge-leaderboard${n}`)}function T(e,t={}){const n=new URLSearchParams;return n.set("name",e),t.yearFrom&&t.yearFrom>2e3&&n.set("year_from",String(t.yearFrom)),t.yearTo&&t.yearTo<f&&n.set("year_to",String(t.yearTo)),o(`/api/v1/analytics/judge-profile?${n.toString()}`)}function b(e,t={}){const n=new URLSearchParams;return n.set("names",e.join(",")),t.yearFrom&&t.yearFrom>2e3&&n.set("year_from",String(t.yearFrom)),t.yearTo&&t.yearTo<f&&n.set("year_to",String(t.yearTo)),o(`/api/v1/analytics/judge-compare?${n.toString()}`)}function P(e){return o(`/api/v1/analytics/judge-bio?name=${encodeURIComponent(e)}`)}function R(e={}){const t=new URLSearchParams;s(t,e),typeof e.limit=="number"&&t.set("limit",String(e.limit));const n=t.toString()?`?${t.toString()}`:"";return o(`/api/v1/analytics/concept-effectiveness${n}`)}function F(e={}){const t=new URLSearchParams;s(t,e),typeof e.limit=="number"&&t.set("limit",String(e.limit)),typeof e.min_count=="number"&&t.set("min_count",String(e.min_count));const n=t.toString()?`?${t.toString()}`:"";return o(`/api/v1/analytics/concept-cooccurrence${n}`)}function C(e={}){const t=new URLSearchParams;s(t,e),typeof e.limit=="number"&&t.set("limit",String(e.limit));const n=t.toString()?`?${t.toString()}`:"";return o(`/api/v1/analytics/concept-trends${n}`)}function L(e={}){const t=new URLSearchParams;s(t,e);const n=t.toString()?`?${t.toString()}`:"";return o(`/api/v1/analytics/monthly-trends${n}`)}function U(e={}){const t=new URLSearchParams;s(t,e),typeof e.top_n=="number"&&t.set("top_n",String(e.top_n));const n=t.toString()?`?${t.toString()}`:"";return o(`/api/v1/analytics/flow-matrix${n}`)}function j(e){const t=new URLSearchParams;for(const[n,a]of Object.entries(e))a!==void 0&&a!==""&&t.set(n,String(a));return o(`/api/v1/cases?${t}`)}function q(e){return o(`/api/v1/cases/${e}`)}async function x(e){return(await o("/api/v1/cases",{method:"POST",body:JSON.stringify(e)})).case}async function E(e,t){return(await o(`/api/v1/cases/${e}`,{method:"PUT",body:JSON.stringify(t)})).case}function O(e){return o(`/api/v1/cases/${e}`,{method:"DELETE"})}function J(e,t,n){return o("/api/v1/cases/batch",{method:"POST",body:JSON.stringify({action:e,case_ids:t,tag:n})})}function A(e){const t=new URLSearchParams;return e.forEach(n=>t.append("ids",n)),o(`/api/v1/cases/compare?${t}`)}function N(e){return o(`/api/v1/cases/${e}/related`)}function k(){return o("/api/v1/filter-options")}function D(){return o("/api/v1/job-status")}function I(e){return o("/api/v1/download/start",{method:"POST",body:JSON.stringify(e)})}function M(){return o("/api/v1/pipeline-status")}function B(e,t){return o("/api/v1/pipeline-action",{method:"POST",body:JSON.stringify({action:e,...t})})}function G(){return o("/api/v1/data-dictionary")}function H(e=1,t=10){const n=new URLSearchParams;return n.set("page",String(e)),n.set("limit",String(t)),o(`/api/v1/legislations?${n}`)}function Y(e){return o(`/api/v1/legislations/${encodeURIComponent(e)}`)}function z(e,t=20){const n=new URLSearchParams;return n.set("q",e),n.set("limit",String(t)),o(`/api/v1/legislations/search?${n}`)}function X(e){window.location.href=`/api/v1/export/${e}`}export{k as A,_ as B,T as C,b as D,P as E,H as F,Y as G,z as H,M as a,S as b,A as c,X as d,d as e,D as f,G as g,p as h,m as i,v as j,$ as k,w as l,R as m,F as n,C as o,B as p,U as q,L as r,I as s,x as t,E as u,O as v,J as w,j as x,q as y,N as z};
