let u=null;const y=2e4;async function h(){return u||(u=(await(await fetch("/api/v1/csrf-token")).json()).csrf_token,u)}async function o(t,e={}){const n={"Content-Type":"application/json",...e.headers};e.method&&e.method!=="GET"&&(n["X-CSRFToken"]=await h());let i,l=e.signal;if(!l){const r=new AbortController;l=r.signal,i=setTimeout(()=>r.abort(),y)}let s;try{s=await fetch(t,{...e,headers:n,signal:l})}catch(r){throw r instanceof DOMException&&r.name==="AbortError"?new Error(`Request timeout after ${y/1e3} seconds`):r}finally{i&&clearTimeout(i)}if(!s.ok){const r=await s.json().catch(()=>({error:s.statusText}));throw new Error(r.error||`API error: ${s.status}`)}return s.json()}const f=new Date().getFullYear();function g(t,e){e&&(e.caseNatures?.length&&t.set("case_natures",e.caseNatures.join(",")),e.visaSubclasses?.length&&t.set("visa_subclasses",e.visaSubclasses.join(",")),e.outcomeTypes?.length&&t.set("outcome_types",e.outcomeTypes.join(",")))}function c(t){if(!t)return"";const e=new URLSearchParams;t.court&&e.set("court",t.court),t.yearFrom&&t.yearFrom>2e3&&e.set("year_from",String(t.yearFrom)),t.yearTo&&t.yearTo<f&&e.set("year_to",String(t.yearTo)),g(e,t);const n=e.toString();return n?`?${n}`:""}function a(t,e){e&&(e.court&&t.set("court",e.court),e.yearFrom&&e.yearFrom>2e3&&t.set("year_from",String(e.yearFrom)),e.yearTo&&e.yearTo<f&&t.set("year_to",String(e.yearTo)),g(t,e))}function S(t){return o(`/api/v1/stats${c(t)}`)}function d(t){return o(`/api/v1/stats/trends${c(t)}`)}function p(t){return o(`/api/v1/analytics/outcomes${c(t)}`)}function m(t,e=20){const n=c(t);return o(`/api/v1/analytics/judges${n}${n?"&":"?"}limit=${e}`)}function v(t,e=20){const n=c(t);return o(`/api/v1/analytics/legal-concepts${n}${n?"&":"?"}limit=${e}`)}function $(t){return o(`/api/v1/analytics/nature-outcome${c(t)}`)}function _(t={}){const e=new URLSearchParams;a(e,t),t.visa_subclass&&e.set("visa_subclass",t.visa_subclass),t.case_nature&&e.set("case_nature",t.case_nature),t.legal_concepts&&t.legal_concepts.length>0&&e.set("legal_concepts",t.legal_concepts.join(","));const n=e.toString()?`?${e.toString()}`:"";return o(`/api/v1/analytics/success-rate${n}`)}function w(t={}){const e=new URLSearchParams;a(e,t),t.sort_by&&e.set("sort_by",t.sort_by),typeof t.limit=="number"&&e.set("limit",String(t.limit));const n=e.toString()?`?${e.toString()}`:"";return o(`/api/v1/analytics/judge-leaderboard${n}`)}function T(t,e={}){const n=new URLSearchParams;return n.set("name",t),e.yearFrom&&e.yearFrom>2e3&&n.set("year_from",String(e.yearFrom)),e.yearTo&&e.yearTo<f&&n.set("year_to",String(e.yearTo)),o(`/api/v1/analytics/judge-profile?${n.toString()}`)}function b(t,e={}){const n=new URLSearchParams;return n.set("names",t.join(",")),e.yearFrom&&e.yearFrom>2e3&&n.set("year_from",String(e.yearFrom)),e.yearTo&&e.yearTo<f&&n.set("year_to",String(e.yearTo)),o(`/api/v1/analytics/judge-compare?${n.toString()}`)}function P(t){return o(`/api/v1/analytics/judge-bio?name=${encodeURIComponent(t)}`)}function R(t={}){const e=new URLSearchParams;a(e,t),typeof t.limit=="number"&&e.set("limit",String(t.limit));const n=e.toString()?`?${e.toString()}`:"";return o(`/api/v1/analytics/concept-effectiveness${n}`)}function F(t={}){const e=new URLSearchParams;a(e,t),typeof t.limit=="number"&&e.set("limit",String(t.limit)),typeof t.min_count=="number"&&e.set("min_count",String(t.min_count));const n=e.toString()?`?${e.toString()}`:"";return o(`/api/v1/analytics/concept-cooccurrence${n}`)}function C(t={}){const e=new URLSearchParams;a(e,t),typeof t.limit=="number"&&e.set("limit",String(t.limit));const n=e.toString()?`?${e.toString()}`:"";return o(`/api/v1/analytics/concept-trends${n}`)}function L(t={}){const e=new URLSearchParams;a(e,t);const n=e.toString()?`?${e.toString()}`:"";return o(`/api/v1/analytics/monthly-trends${n}`)}function U(t={}){const e=new URLSearchParams;a(e,t),typeof t.top_n=="number"&&e.set("top_n",String(t.top_n));const n=e.toString()?`?${e.toString()}`:"";return o(`/api/v1/analytics/flow-matrix${n}`)}function j(t){const e=new URLSearchParams;for(const[n,i]of Object.entries(t))i!==void 0&&i!==""&&e.set(n,String(i));return o(`/api/v1/cases?${e}`)}function q(t){return o(`/api/v1/cases/${t}`)}function x(t){return o("/api/v1/cases",{method:"POST",body:JSON.stringify(t)})}function E(t,e){return o(`/api/v1/cases/${t}`,{method:"PUT",body:JSON.stringify(e)})}function O(t){return o(`/api/v1/cases/${t}`,{method:"DELETE"})}function J(t,e,n){return o("/api/v1/cases/batch",{method:"POST",body:JSON.stringify({action:t,case_ids:e,tag:n})})}function A(t){const e=new URLSearchParams;return t.forEach(n=>e.append("ids",n)),o(`/api/v1/cases/compare?${e}`)}function N(t){return o(`/api/v1/cases/${t}/related`)}function k(){return o("/api/v1/filter-options")}function D(){return o("/api/v1/job-status")}function I(t){return o("/api/v1/download/start",{method:"POST",body:JSON.stringify(t)})}function M(){return o("/api/v1/pipeline-status")}function B(t,e){return o("/api/v1/pipeline-action",{method:"POST",body:JSON.stringify({action:t,...e})})}function G(){return o("/api/v1/data-dictionary")}function H(t=1,e=10){const n=new URLSearchParams;return n.set("page",String(t)),n.set("limit",String(e)),o(`/api/v1/legislations?${n}`)}function Y(t){return o(`/api/v1/legislations/${encodeURIComponent(t)}`)}function z(t,e=20){const n=new URLSearchParams;return n.set("q",t),n.set("limit",String(e)),o(`/api/v1/legislations/search?${n}`)}function X(t){window.location.href=`/api/v1/export/${t}`}export{k as A,w as B,T as C,b as D,P as E,H as F,Y as G,z as H,M as a,S as b,A as c,X as d,d as e,D as f,G as g,p as h,m as i,v as j,$ as k,_ as l,R as m,F as n,C as o,B as p,U as q,L as r,I as s,x as t,E as u,O as v,J as w,j as x,q as y,N as z};
