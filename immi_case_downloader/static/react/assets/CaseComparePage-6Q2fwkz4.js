import{u as g,j as e}from"./query-DQVcjD57.js";import{c as f}from"./api-BvrL3ogf.js";import{C as d}from"./CourtBadge-Dl3EUmwl.js";import{O as h}from"./OutcomeBadge-CVrUrw_x.js";import{N as y}from"./NatureBadge-BhB54YxF.js";import{B as j}from"./Breadcrumb-BGpauoZZ.js";import{E as b}from"./EmptyState-G-Z6VqX3.js";import{u as _,a as N}from"./index-BVFuTJQG.js";import{G as w}from"./git-compare-7G4xxX3y.js";import{E as v}from"./external-link-Di0KpQMI.js";import{i as K,u as k,L as S}from"./vendor-CxW-pF4z.js";import"./chevron-right-VPXu-Cmy.js";import"./charts-CKTqRh7i.js";const C=[{key:"court",i18nKey:"cases.court"},{key:"court_code",i18nKey:"cases.court_code"},{key:"date",i18nKey:"cases.date"},{key:"year",i18nKey:"units.year"},{key:"judges",i18nKey:"cases.judges"},{key:"outcome",i18nKey:"cases.outcome"},{key:"case_nature",i18nKey:"cases.nature"},{key:"visa_type",i18nKey:"cases.visa_type"},{key:"visa_subclass",i18nKey:"cases.visa_subclass"},{key:"legislation",i18nKey:"cases.legislation"},{key:"legal_concepts",i18nKey:"cases.legal_concepts"},{key:"catchwords",i18nKey:"case_detail.catchwords"},{key:"source",i18nKey:"cases.source"},{key:"tags",i18nKey:"case_detail.tags"}];function M(){const{t:a}=_(),[p]=K(),x=k(),i=p.getAll("ids"),{data:o,isLoading:u}=g({queryKey:["compare",i],queryFn:()=>f(i),enabled:i.length>=2});if(i.length<2)return e.jsx(b,{icon:e.jsx(w,{className:"h-8 w-8"}),title:a("pages.case_comparison.select_cases"),description:a("pages.case_comparison.description"),action:e.jsx("button",{onClick:()=>x("/cases"),className:"rounded-md bg-accent px-4 py-2 text-sm font-medium text-white hover:bg-accent-light",children:a("pages.case_comparison.go_to_cases")})});if(u||!o)return e.jsx("div",{className:"flex h-64 items-center justify-center text-muted-text",children:a("common.loading_ellipsis")});const c=o.cases,l=C.map(({key:s,i18nKey:r})=>({key:s,label:a(r)})),m=new Set;for(const{key:s}of l){const r=c.map(n=>String(n[s]??""));new Set(r).size>1&&m.add(s)}return e.jsxs("div",{className:"space-y-4",children:[e.jsx(j,{items:[{label:a("nav.cases"),href:"/cases"},{label:`${a("cases.comparison")} (${c.length})`}]}),e.jsx("div",{className:"overflow-x-auto rounded-lg border border-border bg-card",children:e.jsxs("table",{className:"min-w-max text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border bg-surface",children:[e.jsx("th",{className:"sticky left-0 z-10 bg-surface p-3 text-left font-medium text-secondary-text",children:a("pages.data_dictionary.field_name")}),c.map(s=>e.jsxs("th",{className:"min-w-[200px] max-w-[250px] p-3 text-left",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{court:s.court_code,className:"shrink-0"}),e.jsx("span",{className:"line-clamp-1 font-medium text-foreground",title:s.citation||s.title,children:s.citation||s.title})]}),e.jsxs(S,{to:`/cases/${s.case_id}`,className:"mt-1 inline-flex items-center gap-1 text-xs text-accent hover:underline",children:[a("buttons.view_details")," ",e.jsx(v,{className:"h-3 w-3"})]})]},s.case_id))]})}),e.jsx("tbody",{children:l.map(({key:s,label:r})=>{const n=m.has(s);return e.jsxs("tr",{className:N("border-b border-border-light",n&&"bg-warning/5"),children:[e.jsxs("td",{className:"sticky left-0 z-10 bg-card p-3 font-medium text-secondary-text whitespace-nowrap",children:[r,n&&e.jsx("span",{className:"ml-1 text-[10px] text-warning",children:a("pages.case_comparison.differs")})]}),c.map(t=>e.jsx("td",{className:"max-w-[250px] p-3 text-foreground",children:s==="outcome"?e.jsx(h,{outcome:t[s]}):s==="court_code"?e.jsx(d,{court:String(t[s]??"")}):s==="case_nature"?e.jsx(y,{nature:String(t[s]??"")}):e.jsx("span",{className:"line-clamp-3",title:String(t[s]??""),children:String(t[s]??"")||e.jsx("span",{className:"text-muted-text",children:"â€”"})})},t.case_id))]},s)})})]})})]})}export{M as CaseComparePage};
