import{j as e}from"./query-DQVcjD57.js";import{j as C,u as w,r as d,L as i}from"./vendor-CxW-pF4z.js";import{c as k,d as T,e as E}from"./use-cases-iqu99bo2.js";import{C as f}from"./CourtBadge-BFJX2cdI.js";import{O as L}from"./OutcomeBadge-C2FCmK5c.js";import{N as R}from"./NatureBadge-Bs5qSVY5.js";import{B as S}from"./Breadcrumb-Cxpvkl8D.js";import{T as B,C as D}from"./ConfirmModal-BdFCeVUk.js";import{C as M}from"./CaseTextViewer-B7HMJYl6.js";import{c as $,u as I,t as h,a as O}from"./index-DVepBQ7E.js";import{E as P}from"./external-link-BzWt6dsK.js";import{C as A,a as U}from"./copy-DUAg6II3.js";import"./api-CH3UgZL0.js";import"./chevron-right-Ba97YGnb.js";import"./chevron-up-B-93QcSa.js";import"./download-CUni_raK.js";import"./charts-CKTqRh7i.js";const q=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],H=$("square-pen",q);function oe(){const{t:a}=I(),{id:o}=C(),l=w(),{data:n,isLoading:j}=k(o),{data:m}=T(o),x=E(),[v,u]=d.useState(!1),[N,b]=d.useState(!1);d.useEffect(()=>{const r=c=>{const g=c.target;g.tagName==="INPUT"||g.tagName==="TEXTAREA"||c.key==="e"&&!c.metaKey&&!c.ctrlKey&&l(`/cases/${o}/edit`)};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[o,l]);const _=d.useCallback(async()=>{try{await x.mutateAsync(o),h.success(a("states.completed")),l("/cases")}catch(r){h.error(r.message)}},[o,x,l]),y=d.useCallback(()=>{n?.case.citation&&(navigator.clipboard.writeText(n.case.citation),b(!0),setTimeout(()=>b(!1),2e3))},[n]);if(j||!n)return e.jsx("div",{className:"flex h-64 items-center justify-center text-muted-text",children:a("common.loading_ellipsis")});const s=n.case,p=n.full_text;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{items:[{label:a("cases.title"),href:"/cases"},{label:s.citation||s.title||a("cases.case_details")}]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.url&&e.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 rounded-md border border-border px-3 py-1.5 text-sm text-foreground hover:bg-surface",children:[e.jsx(P,{className:"h-3.5 w-3.5"})," ",a("cases.url")]}),e.jsxs(i,{to:`/cases/${s.case_id}/edit`,className:"flex items-center gap-1 rounded-md border border-border px-3 py-1.5 text-sm text-foreground hover:bg-surface",children:[e.jsx(H,{className:"h-3.5 w-3.5"})," ",a("common.edit")]}),e.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-1 rounded-md border border-danger/30 px-3 py-1.5 text-sm text-danger hover:bg-danger/5",children:[e.jsx(B,{className:"h-3.5 w-3.5"})," ",a("common.delete")]})]})]}),e.jsxs("div",{className:"rounded-lg border border-border bg-card p-5",children:[e.jsxs("div",{className:"mb-2 flex flex-wrap items-center gap-2",children:[e.jsx(f,{court:s.court_code}),e.jsx(L,{outcome:s.outcome}),e.jsx(R,{nature:s.case_nature})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("h1",{className:"font-heading text-xl font-semibold text-foreground",children:s.citation||s.title}),e.jsx("button",{onClick:y,className:"mt-1 shrink-0 rounded-md p-1 text-muted-text hover:bg-surface hover:text-foreground",title:a("case_detail.copy_citation"),children:N?e.jsx(A,{className:"h-4 w-4 text-success"}):e.jsx(U,{className:"h-4 w-4"})})]}),s.title&&s.citation&&s.title!==s.citation&&e.jsx("p",{className:"mt-1 text-sm text-secondary-text",children:s.title})]}),e.jsxs("div",{className:"rounded-lg border border-border bg-card p-5",children:[e.jsx("h2",{className:"mb-3 font-heading text-base font-semibold text-foreground",children:a("cases.case_information")}),e.jsxs("dl",{className:"grid gap-x-6 gap-y-2.5 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsx(t,{label:a("cases.title"),value:s.case_id,mono:!0}),e.jsx(t,{label:a("cases.citation"),value:s.citation}),e.jsx(t,{label:a("cases.date"),value:s.date}),e.jsx(t,{label:a("filters.court"),value:s.court}),e.jsx(t,{label:a("cases.court_code")||"Court Code",value:s.court_code}),e.jsx(t,{label:a("units.year"),value:s.year?String(s.year):""}),e.jsx(t,{label:a("cases.judges"),value:s.judges}),e.jsx(t,{label:a("cases.source")||"Source",value:s.source}),e.jsx(t,{label:a("cases.outcome"),value:s.outcome}),e.jsx(t,{label:a("cases.nature"),value:s.case_nature}),e.jsx(t,{label:a("cases.applicant"),value:s.applicant_name}),e.jsx(t,{label:a("cases.respondent"),value:s.respondent}),e.jsx(t,{label:a("cases.country_of_origin"),value:s.country_of_origin}),e.jsx(t,{label:a("cases.visa_type")||"Visa Type",value:s.visa_type}),e.jsx(t,{label:a("cases.visa_subclass"),value:s.visa_subclass,mono:!0}),e.jsx(t,{label:a("cases.subclass_no")||"Subclass No.",value:s.visa_subclass_number,mono:!0}),e.jsx(t,{label:a("cases.class_code")||"Class Code",value:s.visa_class_code,mono:!0}),e.jsx(t,{label:a("cases.hearing_date")||"Hearing Date",value:s.hearing_date}),e.jsx(t,{label:a("cases.represented")||"Represented",value:s.is_represented}),e.jsx(t,{label:a("cases.representative")||"Representative",value:s.representative}),e.jsx(t,{label:a("cases.legislation"),value:s.legislation})]})]}),s.catchwords&&e.jsxs("div",{className:"rounded-lg border border-border bg-card p-5",children:[e.jsx("h2",{className:"mb-2 font-heading text-base font-semibold",children:a("case_detail.catchwords")}),e.jsx("p",{className:"text-sm leading-relaxed text-secondary-text",children:s.catchwords})]}),s.legal_concepts&&e.jsxs("div",{className:"rounded-lg border border-border bg-card p-5",children:[e.jsx("h2",{className:"mb-2 font-heading text-base font-semibold",children:a("cases.legal_concepts")}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:s.legal_concepts.split(";").map(r=>{const c=r.trim();return c?e.jsx(i,{to:`/cases?keyword=${encodeURIComponent(c)}`,className:"rounded-full bg-surface px-2.5 py-0.5 text-xs text-foreground transition-colors hover:bg-accent-muted hover:text-accent",children:c},c):null})})]}),(s.tags||s.user_notes)&&e.jsxs("div",{className:"rounded-lg border border-border bg-card p-5",children:[e.jsxs("h2",{className:"mb-2 font-heading text-base font-semibold",children:[a("case_detail.notes")," & ",a("case_detail.tags")]}),s.tags&&e.jsxs("div",{className:"mb-3",children:[e.jsx("dt",{className:"mb-1 text-xs font-medium text-secondary-text",children:a("case_detail.tags")}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:s.tags.split(",").map(r=>{const c=r.trim();return c?e.jsx(i,{to:`/cases?tag=${encodeURIComponent(c)}`,className:"rounded-full bg-accent/10 px-2.5 py-0.5 text-xs font-medium text-accent hover:bg-accent/20",children:c},c):null})})]}),s.user_notes&&e.jsxs("div",{children:[e.jsx("dt",{className:"mb-1 text-xs font-medium text-secondary-text",children:a("case_detail.notes")}),e.jsx("p",{className:"whitespace-pre-wrap text-sm text-foreground",children:s.user_notes})]})]}),m&&m.cases.length>0&&e.jsxs("div",{className:"rounded-lg border border-border bg-card p-5",children:[e.jsx("h2",{className:"mb-3 font-heading text-base font-semibold",children:a("cases.related_cases")}),e.jsx("div",{className:"grid gap-2 sm:grid-cols-2 lg:grid-cols-3",children:m.cases.map(r=>e.jsxs(i,{to:`/cases/${r.case_id}`,className:"flex items-center gap-3 rounded-md border border-border-light px-3 py-2 text-sm transition-colors hover:border-accent hover:bg-surface",children:[e.jsx(f,{court:r.court_code}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("span",{className:"block truncate font-medium text-foreground",children:r.citation||r.title}),e.jsx("span",{className:"text-xs text-muted-text",children:r.date})]})]},r.case_id))})]}),p&&e.jsx(M,{text:p,citation:s.citation}),e.jsx(D,{open:v,title:a("modals.confirm_delete"),message:a("modals.confirm_delete_message",{name:s.citation||s.title}),confirmLabel:a("common.delete"),variant:"danger",onConfirm:_,onCancel:()=>u(!1)})]})}function t({label:a,value:o,mono:l}){return o?e.jsxs("div",{className:"min-w-0",children:[e.jsx("dt",{className:"text-xs font-medium text-secondary-text",children:a}),e.jsx("dd",{className:O("mt-0.5 break-words text-sm text-foreground",l&&"font-mono text-xs"),children:o})]}):null}export{oe as CaseDetailPage};
