import{j as e}from"./query-DQVcjD57.js";import{u as b,r as u}from"./vendor-CxW-pF4z.js";import{g as p}from"./use-cases-CPKl1up0.js";import{B as h}from"./Breadcrumb-BGpauoZZ.js";import{u as f,t as i}from"./index-BVFuTJQG.js";import{P as v}from"./plus-Bj1j4Cia.js";import"./api-BvrL3ogf.js";import"./chevron-right-VPXu-Cmy.js";import"./charts-CKTqRh7i.js";const j=["","AATA","ARTA","FCA","FCCA","FedCFamC2G","HCA"],_=["","Migration","Refugee","Judicial Review","Citizenship","Visa Cancellation","Deportation","Character","Bridging Visa"];function R(){const{t:a}=f(),l=b(),n=p(),[t,c]=u.useState({}),o=u.useCallback((s,d)=>{c(x=>({...x,[s]:d}))},[]),g=async s=>{if(s.preventDefault(),!t.title?.trim()){i.error(a("pages.case_add.title_required"));return}if(t.citation&&!/^\[?\d{4}\]?\s+\w+\s+\d+/.test(t.citation)){i.error(a("pages.case_add.citation_format"));return}try{const d=await n.mutateAsync(t);i.success(a("pages.case_add.success")),l(`/cases/${d.case_id}`)}catch(d){i.error(d.message)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(h,{items:[{label:a("nav.cases"),href:"/cases"},{label:a("pages.case_add.breadcrumb_add")}]}),e.jsx("form",{onSubmit:g,children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"rounded-lg border border-border bg-card p-5 lg:col-span-2",children:[e.jsx("h2",{className:"mb-3 font-heading text-base font-semibold",children:a("pages.case_add.new_case")}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsx(r,{label:`${a("cases.case_title")} *`,value:t.title,onChange:s=>o("title",s)}),e.jsx(r,{label:a("cases.citation"),value:t.citation,onChange:s=>o("citation",s),placeholder:"[2024] FCA 123"}),e.jsx(r,{label:a("cases.court"),value:t.court,onChange:s=>o("court",s)}),e.jsx(m,{label:a("cases.court_code"),value:t.court_code,options:j,onChange:s=>o("court_code",s)}),e.jsx(r,{label:a("cases.date"),value:t.date,onChange:s=>o("date",s),placeholder:"DD Month YYYY"}),e.jsx(r,{label:a("cases.judges"),value:t.judges,onChange:s=>o("judges",s)}),e.jsx(r,{label:a("cases.outcome"),value:t.outcome,onChange:s=>o("outcome",s)}),e.jsx(r,{label:a("cases.visa_type"),value:t.visa_type,onChange:s=>o("visa_type",s)}),e.jsx(r,{label:a("cases.visa_subclass"),value:t.visa_subclass,onChange:s=>o("visa_subclass",s)}),e.jsx(r,{label:a("cases.class_code"),value:t.visa_class_code,onChange:s=>o("visa_class_code",s)}),e.jsx(m,{label:a("cases.nature"),value:t.case_nature,options:_,onChange:s=>o("case_nature",s)}),e.jsx(r,{label:a("cases.url"),value:t.url,onChange:s=>o("url",s),span2:!0}),e.jsx(r,{label:a("cases.source"),value:t.source,onChange:s=>o("source",s)}),e.jsx(r,{label:a("cases.legislation"),value:t.legislation,onChange:s=>o("legislation",s)})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-lg border border-border bg-card p-5",children:[e.jsx("h2",{className:"mb-3 font-heading text-base font-semibold",children:a("pages.case_edit.annotations")}),e.jsx(r,{label:a("case_detail.tags"),value:t.tags,onChange:s=>o("tags",s),placeholder:"Comma-separated"}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-secondary-text",children:a("case_detail.notes")}),e.jsx("textarea",{value:t.user_notes??"",onChange:s=>o("user_notes",s.target.value),rows:6,className:"w-full rounded-md border border-border bg-surface px-3 py-1.5 text-sm text-foreground focus:border-accent focus:outline-none focus:ring-1 focus:ring-accent"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>l(-1),className:"flex-1 rounded-md border border-border px-4 py-2 text-sm text-foreground hover:bg-surface",children:a("common.cancel")}),e.jsxs("button",{type:"submit",disabled:n.isPending,className:"flex flex-1 items-center justify-center gap-1 rounded-md bg-accent px-4 py-2 text-sm font-medium text-white hover:bg-accent-light disabled:opacity-50",children:[e.jsx(v,{className:"h-4 w-4"}),n.isPending?a("pages.case_add.creating"):a("pages.case_add.save_button")]})]})]})]})})]})}function r({label:a,value:l,onChange:n,placeholder:t,span2:c}){return e.jsxs("div",{className:c?"sm:col-span-2":"",children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-secondary-text",children:a}),e.jsx("input",{type:"text",value:l??"",onChange:o=>n(o.target.value),placeholder:t,className:"w-full rounded-md border border-border bg-surface px-3 py-1.5 text-sm text-foreground focus:border-accent focus:outline-none focus:ring-1 focus:ring-accent"})]})}function m({label:a,value:l,options:n,onChange:t}){return e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-secondary-text",children:a}),e.jsx("select",{value:l??"",onChange:c=>t(c.target.value),className:"w-full rounded-md border border-border bg-surface px-3 py-1.5 text-sm text-foreground focus:border-accent focus:outline-none focus:ring-1 focus:ring-accent",children:n.map(c=>e.jsx("option",{value:c,children:c||`Select ${a}...`},c))})]})}export{R as CaseAddPage};
