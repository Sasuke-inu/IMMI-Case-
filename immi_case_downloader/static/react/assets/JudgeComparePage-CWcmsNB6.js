import{j as e}from"./query-DQVcjD57.js";import{L as j,k as b,r as f}from"./vendor-CxW-pF4z.js";import{A as x}from"./ApiErrorState-DaJ93vn1.js";import{u as h,a as v}from"./index-Bnk0r1Pl.js";import{a as _,O as u,d as y}from"./use-judges-De0dOjwj.js";import{R as n,P as N,a as C,C as k,T as c,B as w,X as p,Y as g,d as R,A as S,e as L}from"./charts-CKTqRh7i.js";import"./api-mEKAgK73.js";function A({judge:t}){const{t:r}=h(),a=t.judge.active_years.first??"-",o=t.judge.active_years.last??"-",d=Object.entries(t.outcome_distribution).map(([s,l])=>({outcome:s,count:l})),i=t.visa_breakdown.slice(0,5);return e.jsxs("div",{className:"flex flex-col rounded-lg border border-border bg-card",children:[e.jsxs("div",{className:"flex items-start justify-between border-b border-border-light/60 p-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:t.judge.name}),e.jsxs("p",{className:"mt-0.5 text-xs text-muted-text",children:[t.court_type," · ",t.judge.total_cases.toLocaleString()," ",r("judges.cases")," · ",a," – ",o]})]}),e.jsxs("span",{className:v("shrink-0 rounded-sm px-2 py-0.5 text-sm font-semibold",_(t.approval_rate)),children:[t.approval_rate.toFixed(1),"%"]})]}),e.jsxs("div",{className:"border-b border-border-light/60 p-4",children:[e.jsx("p",{className:"mb-2 text-xs font-medium uppercase tracking-wide text-muted-text",children:r("judges.outcome_distribution")}),d.length>0?e.jsx(n,{width:"100%",height:160,children:e.jsxs(N,{children:[e.jsx(C,{data:d,dataKey:"count",nameKey:"outcome",outerRadius:60,innerRadius:30,children:d.map((s,l)=>e.jsx(k,{fill:u[l%u.length]},s.outcome))}),e.jsx(c,{formatter:s=>[Number(s??0).toLocaleString(),r("judges.cases")],contentStyle:{backgroundColor:"var(--color-background-card)",border:"1px solid var(--color-border)",borderRadius:"var(--radius)",color:"var(--color-text)",fontSize:11}})]})}):e.jsx("p",{className:"text-xs text-muted-text",children:r("judges.no_outcome_data")})]}),e.jsxs("div",{className:"border-b border-border-light/60 p-4",children:[e.jsx("p",{className:"mb-2 text-xs font-medium uppercase tracking-wide text-muted-text",children:r("judges.top_visa_subclasses")}),i.length>0?e.jsx(n,{width:"100%",height:120,children:e.jsxs(w,{data:i,layout:"vertical",margin:{top:0,right:30,left:0,bottom:0},children:[e.jsx(p,{type:"number",hide:!0}),e.jsx(g,{type:"category",dataKey:"subclass",width:60,tick:{fontSize:10,fill:"var(--color-text-secondary)"}}),e.jsx(c,{formatter:s=>[Number(s??0).toLocaleString(),r("judges.cases")],contentStyle:{backgroundColor:"var(--color-background-card)",border:"1px solid var(--color-border)",borderRadius:"var(--radius)",color:"var(--color-text)",fontSize:11}}),e.jsx(R,{dataKey:"total",fill:"#1a5276",radius:[0,4,4,0]})]})}):e.jsx("p",{className:"text-xs text-muted-text",children:r("judges.no_visa_subclass_data")})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"mb-2 text-xs font-medium uppercase tracking-wide text-muted-text",children:r("judges.yearly_approval_trend")}),t.yearly_trend.length>0?e.jsx(n,{width:"100%",height:100,children:e.jsxs(S,{data:t.yearly_trend,margin:{top:5,right:5,left:-20,bottom:0},children:[e.jsx(p,{dataKey:"year",tick:{fontSize:9,fill:"var(--color-text-secondary)"}}),e.jsx(g,{hide:!0}),e.jsx(c,{formatter:s=>[`${Number(s??0).toFixed(1)}%`,r("judges.approval_rate")],contentStyle:{backgroundColor:"var(--color-background-card)",border:"1px solid var(--color-border)",borderRadius:"var(--radius)",color:"var(--color-text)",fontSize:11}}),e.jsx(L,{type:"monotone",dataKey:"approval_rate",stroke:"#2d7d46",fill:"#2d7d4630",strokeWidth:1.5})]})}):e.jsx("p",{className:"text-xs text-muted-text",children:r("judges.no_trend_data")})]})]})}function E(){const{search:t}=b();return f.useMemo(()=>(new URLSearchParams(t).get("names")??"").split(",").map(o=>decodeURIComponent(o.trim())).filter(Boolean).slice(0,4),[t])}function U(){const{t}=h(),r=E(),{data:a,isLoading:o,isError:d,error:i,refetch:s}=y(r),l=(a?.judges.length??0)>=4?"lg:grid-cols-2 xl:grid-cols-4":"lg:grid-cols-2";return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:t("pages.judge_comparison.title")}),e.jsxs(j,{to:"/judge-profiles",className:"text-sm font-medium text-accent hover:underline",children:["← ",t("pages.judge_comparison.back_to_profiles")]})]}),r.length<2?e.jsx("p",{className:"text-sm text-muted-text",children:t("pages.judge_comparison.min_judges")}):o?e.jsx("p",{className:"text-sm text-muted-text",children:t("common.loading_ellipsis")}):d?e.jsx(x,{title:t("judges.profile_load_failed"),message:i instanceof Error?i.message:t("errors.api_request_failed",{name:"Judge Compare"}),onRetry:()=>{s()}}):a?e.jsx("div",{className:`grid gap-4 ${l}`,children:a.judges.map(m=>e.jsx(A,{judge:m},m.judge.name))}):e.jsx(x,{title:t("judges.profile_not_found"),message:t("errors.payload_error",{name:"Judge Compare"}),onRetry:()=>{s()}})]})}export{U as JudgeComparePage};
